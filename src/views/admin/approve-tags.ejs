<div class="container">
  <h2>Pending tags:</h2>

  <ul>
    <% for (const tag of pendingTags) { %>
      <li>
        <%- tag -%>
        <a class="btn btn-primary approve-tag" data-tag="<%- tag -%>">Approve</a>
      </li>
    <% } %>
  </ul>

  <h2> All Reviews:</h2>
  <ul class="list-group">
    <% for (const review of allReviews) { %>
      <li class="list-group-item">
        <div class="row">
          <div class="col-1">
            <%- review.review_id -%>
          </div>
          <div class="col-2">
            <%- review.business_name -%>
          </div>
          <div class="col-3">
            <%- review.address -%>
          </div>
          <div class="col-3">
            <%- review.user_name -%>
            <%- review.email -%>
          </div>
          <div class="col-2">
            <%- review.date -%>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <%- review.content -%>
          </div>
        </div>

      </li>
    <% } %>
  </ul>

</div>

<form id='approve-tag-form' method="POST" action='/admin/approve-tag'>
  <input name="tag" id='approve-tag-input' type="hidden" />
</form>

<%- contentFor('title') -%>
Ample | Admin

<%- contentFor('scripts') -%>
<script>

document.addEventListener('click', event => {
  if (event.target.classList.contains('approve-tag')) {
    const {tag} = event.target.dataset;
    if (confirm(`Are you sure you want to approve the tag '${tag}'`)) {
      document.getElementById('approve-tag-input').value = tag;
      document.getElementById('approve-tag-form').submit();
    }
  }
});
</script>
